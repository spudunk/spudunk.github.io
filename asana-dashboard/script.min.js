var e,t="1181114934981905",n=Asana.Client.create(),o=document.getElementById("tokenInput"),a=document.getElementById("projectIdInput"),l=document.getElementById("setToken"),d=document.getElementById("contentDiv");tokenInfo=document.getElementById("tokenInfo");var c="Asana Tasks Test App",s=document.getElementById("header"),r=document.getElementById("title");function u(){projectID=a.value}function i(t){void 0===t&&(t=null),10<o.value.length?(e=o.value,n.useAccessToken(e),tokenInfo&&(tokenInfo.style.display="none"),t&&t()):alert("must input Asana API token")}function m(){u(),n.users.me().then(function(t){console.log(t),document.getElementById("user").innerHTML='<table>\n                <tr><td colspan="2"><strong>'+t.name+"</strong></td></tr>\n                <tr><td>Email</td><td>"+t.email+"</td></tr>\n                <tr><td>Asana GID</td><td>"+t.gid+"</td></tr>\n            </table>"}),n.tasks.getTasks({project:t,opt_fields:"name,completed,assignee.(name|email),custom_fields.(enum_value|name)"}).then(function(t){d.innerHTML='<table id="taskTable"><tr><th>Name</th><th>Status</th><th>Flags</th></tr></table>',taskTable=document.getElementById("taskTable"),console.log(t.data),t.data.forEach(function(t){g(t)})})}function g(t){tr=document.createElement("tr"),contentString="<td>"+t.name+"</td>",t.completed?contentString+='<td style="color:green"><strong>COMPLETE</strong></td>':contentString+='<td style="color:red"><strong>INCOMPLETE</strong></td>',customFieldString="<td>",t.custom_fields.forEach(function(t){t.enum_value&&(customFieldString+='<span style="color:'+t.enum_value.color+'"> '+t.enum_value.name+" </span>")}),customFieldString+="</td>",contentString+=customFieldString,tr.innerHTML=contentString,taskTable.appendChild(tr)}Array(r,s).forEach(function(t){t.textContent=c}),a.value=t,e&&(o.value=e,n.useAccessToken(e),m()),l.onclick=function(){i(m)},o.addEventListener("keyup",function(t){13===t.keyCode&&i(m)});